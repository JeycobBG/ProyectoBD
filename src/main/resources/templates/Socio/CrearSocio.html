<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Registrar Socio</title>
</head>
<body>
    <h2>Registrar un nuevo socio</h2>

<div class="container">
    <div>
    <form id="registrarSocioForm" action="/socio/guardar" method="post">
        
        <!-- Campo para la fecha de registro -->
        <label for="fechaRegistro">Fecha de registro:</label><br>
        <input type="date" id="fechaRegistro" name="fechaRegistro" required><br>
        
        <!-- Combo box para seleccionar la persona asociada -->
        <label for="persona">Persona asociada:</label><br>
        <select id="persona" name="persona" required>
            <option value="">Selecciona una persona</option>
            <!-- Aquí puedes cargar dinámicamente las opciones de persona desde tu backend -->
            <!-- Por ejemplo, podrías iterar sobre una lista de personas disponibles -->
            <!-- y generar opciones para cada una -->
            <option value="persona1">Persona 1</option>
            <option value="persona2">Persona 2</option>
            <option value="persona3">Persona 3</option>
            <!-- Fin de las opciones de ejemplo -->
        </select><br>
        
        <!-- Combo box para seleccionar el préstamo asociado -->
        <label for="prestamo">Préstamo asociado:</label><br>
        <select id="prestamo" name="prestamo" required>
            <option value="">Selecciona un préstamo</option>
            <!-- Aquí puedes cargar dinámicamente las opciones de préstamo desde tu backend -->
            <!-- Por ejemplo, podrías iterar sobre una lista de préstamos disponibles -->
            <!-- y generar opciones para cada uno -->
            <option value="prestamo1">Préstamo 1</option>
            <option value="prestamo2">Préstamo 2</option>
            <option value="prestamo3">Préstamo 3</option>
            <!-- Fin de las opciones de ejemplo -->
        </select><br>
        
        <!-- Puedes agregar más campos según necesites para el socio -->
        
        <input type="submit" value="Guardar">
    </form>
    </div>
</div>
  <div class="alert alert-success" th:if="${exito!=null}" th:text="${exito}"></div>
  <div class="alert alert-error" th:if="${error!=null}" th:text="${error}"></div>

<script>
    // Validación del formulario
    document.getElementById("registrarSocioForm").addEventListener("submit", function(event) {
        var fechaRegistro = document.getElementById("fechaRegistro").value;
        var persona = document.getElementById("persona").value;
        var prestamo = document.getElementById("prestamo").value;
        
        // Validar que todos los campos estén completos
        if (fechaRegistro.trim() === "" || persona === "" || prestamo === "") {
            alert("Por favor completa todos los campos.");
            event.preventDefault();
            return;
        }
        
        // Validar que la fecha de registro no sea en el futuro
        var fechaHoy = new Date().toISOString().split("T")[0]; // Obtener la fecha de hoy en formato ISO
        if (fechaRegistro > fechaHoy) {
            alert("La fecha de registro no puede ser en el futuro.");
            event.preventDefault();
        }
    });
</script>
</body>
</html>
